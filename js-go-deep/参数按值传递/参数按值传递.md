# 定义

在 js 高程中(红宝书)4.1.3 中介绍

> ES 所有的函数参数都是按值传递的

什么是按值传递呢

> 将函数外部的值复制给函数内部的参数，就像把值从一个变量复制到另一个变量一样

## 按值传递

```javascript
function foo(v) {
  v = 2
  console.log(v)
}

var _v = 1
foo(_v)
console.log(v)
```

`v`的改变并不会影响`_v`的值，当`_v`传递到`v`时相当于 copy 了一个变量

## 引用传递

当值是一个复杂的数据结构时，copy 就会产生性能上的问题

所以有一种传递方式叫做引用传递，传递对象的引用，函数内部对参数的任何改变都会影响值，因为两者引用的是同一个对象

## 问题

```javascript
function foo(v) {
  v.name = 'foo'
  v = 3
}

var v = { name: 'xx' }
foo(v)
console.log(v.name) // foo
```

既然是按值传递，为什么对 v.name 修改会影响函数外部呢

js 中有两种数据类型，原始类型与引用类型，在栈中，原始类型直接存储其值，而引用类型的实际值存在堆中，栈内存放的是引用类型的引用(指针)

当进入到执行上下文时，将形参创建为`VO`的属性，值为传递的值，此时原始类型传递的为实际类型，而引用类型传递的为引用

所以修改`v.name`会导致函数外部被修改，但是给`v`复制会将其栈值修改，也就不会影响外部的引用
